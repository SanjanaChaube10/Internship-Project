{% extends "accounts/base.html" %}
{% load static %}
{% block title %}Edit Event{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/edit_events.css' %}">

<div class="event-card">
  <h2 class="form-title">✏ Edit Event – {{ event.event_id }}</h2>
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="form-group">
      <label for="title">Title</label>
      <input id="title" name="title" class="form-control" value="{{ event.title }}" required>
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <textarea id="description" name="description" rows="4" class="form-control">{{ event.description }}</textarea>
    </div>

    <!-- Date & Time + Location -->
      
        <div class="form-group">
          <label for="date_time">Date & Time</label>
          <input type="datetime-local" id="dateTime" name="date_time" class="form-control" required>
        </div>

    <div class="form-group">
      <label for="location">Location</label>
      <input id="location" name="location" class="form-control" value="{{ event.location }}" required>
    </div>

     <!-- NEW: image file -->
    <div class="form-group">
      <label for="id_image">Event Image</label>
      <input type="file" id="id_image" name="image" class="form-control" accept="image/*">
      <small class="ud-note"> JPG/PNG/WebP works great.</small>
    </div>


    <div class="btn-row">
      <button class="btn-save" type="submit">Save</button>
      <a href="{% url 'events:admin_manage_events' %}" class="btn-cancel">Cancel</a>
    </div>
  </form>
</div>


<!-- Restrict Past Date -->
<script>
  document.addEventListener("DOMContentLoaded", function() {
    let dtInput = document.getElementById("dateTime");
    let now = new Date();
    // Format as yyyy-mm-ddThh:mm
    let formatted = now.toISOString().slice(0,16);
    dtInput.min = formatted;
  });
</script>

{% endblock %}