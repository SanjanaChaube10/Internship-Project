{% extends "accounts/base.html" %}
{% load static %}

{% block title %}Invoice • {{ invoice.invoice_id }}{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/registration.css' %}">

<section class="invoice-section">
  <div class="invoice-header">
    <button class="back-btn" onclick="history.back()">&#8592;</button>
    <h1>Invoice</h1>
    <h2>{{ invoice.invoice_id }}</h2>
    <div class="invoice-img"></div>
  </div>

  <div class="invoice-info">
    <div><b>Issued:</b> {{ invoice.issued_date|date:"M d, Y" }}</div>
    <div><b>Registration:</b> {{ registration.registration_id }}</div>
    <div><b>User:</b> {{ registration.user.username }}</div>
    <div><b>Event:</b> {{ event.title }}</div>
    <div class="invoice-due"><b>Total:</b> ₹{{ amount }}</div>
  </div>

  <div class="registrant-information">
    <h3>Details</h3>
    <div><b>Status:</b> {{ registration.payment_status|default:"Pending" }}</div>
    {% if payment %}
      <div><b>Paid At:</b> {{ payment.paid_at|date:"M d, Y g:i A" }}</div>
      <div><b>Gateway:</b> {{ payment.gateway }}</div>
      <div><b>Payment ID:</b> {{ payment.payment_id }}</div>
    {% else %}
      <div><b>Payment:</b> Pending</div>
    {% endif %}
  </div>

  <div class="event-details">
    <table>
      <thead>
        <tr>
          <th>Item</th>
          <th>Qty</th>
          <th>Amount (₹)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>{{ event.title }}</td>
          <td>1</td>
          <td>{{ amount }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <button class="print-invoice-btn" onclick="window.print()">Print / Download</button>
  <div class="invoice-footer">Thanks for registering with Forever Fest!</div>
</section>
{% endblock %}